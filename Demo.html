<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>輕軌車站出入口基本資料 (Vue.js + Bootstrap)</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>

  <div id="app" style="padding:30px;">
    <table class="table table-striped">
      <thead>
        <tr>
          <td>車站代碼</td>
          <td>中文站名</td>
          <td>英文站名</td>
          <td>備註</td>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in data">
          <th scope="row">
            {{item.車站代碼}}
          </th>
          <td>
            {{item.車站中文站名}}
          </td>
          <td>
            {{item.車站英文站名}}
          </td>
          <td>
            {{item.備註}}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script>
    function isNullOrUndefinedOrWhiteSpace(value) {
	if (value === null)
		return true;
	if (value == undefined)
		return true;
	if (value.trim() == "")
		return true;
	return false;
}

var mapping = {
	/**
	 * 轉換成基本問題
	 * @param {ApiResultGetGeneralQuestionData} value
	 */
	convertToBaseQuestions: function (value) {
		var result = [new BaseQuestion()];
		var index = 0;
		result.pop();

		value.data.questionList.forEach(function (e) {
			var obj = new BaseQuestion();

			obj.id = e.id;
			obj.number = e.number;
			obj.description = e.content;
			obj.questionType = e.questionType;

			result.push(obj);

			if (e.options !== undefined) {
				for (var i = 0; i < e.options.length; i++) {
					if (result[index].options !== undefined) {
						result[index].options.push({ id: e.options[i].id, description: e.options[i].content });
					}
				}
			}

			index++;
		});

		return result;
	},

	/**
	 * 轉換成目前要回答的權利問題
	 * @param {ApiResultGetAdvancedQuestionData} value
	 */
	convertToCurrentAdvancedQuestion: function (value) {
		var result = new AdvancedQuestion();
		var questionData = value.data.questionData;
		questionData = value.data.questionData;

		result.advancedQuestionId = questionData.id;
		result.number = questionData.number;
		result.description = questionData.content;
		result.summary = questionData.summary;
		result.questionType = questionData.questionType;
		result.status = questionData.status;
		value.data.questionData.optionSort.forEach(function (e) {
			result.options.push({
				id: e,
				description: questionData.optionList[e]
			})
		});

		return result;
	},

	/**
	 * 將完成基本問題的資料 轉換成 所有權利問題的摘要
	 * @param {string} categoryId 傳入五大項目的id
	 * @param {ApiResultFinishedGeneralQuestion} value
	 * @returns {Array<AdvancedQuestion>}
	 */
	convertToCurrentAdvancedQuestions: function (categoryId, value) {
		var result = [new AdvancedQuestion()];
		result.pop();
		var questionSort = value.data.advancedQuestionData.questionSort;
		var questionList = value.data.advancedQuestionData.questionList;

		questionSort.forEach(function (e) {
			var advancedQuestion = new AdvancedQuestion();

			advancedQuestion.advancedQuestionId = questionList[e].id;
			advancedQuestion.summary = questionList[e].summary;
			advancedQuestion.number = questionList[e].number;

			result.push(advancedQuestion);
		});

		return result;
	},

	/**
	 * @param {ApiResultAnswerAdvancedQuestion} value
	 * @returns {AnsResult}
	 * */
	convertToAnsResult: function (value) {
		var result = new AnsResult();
		var questionData = value.data.questionData;

		result.id = questionData.feedbackId;
		result.result = questionData.feedbackContent;
		result.detail = questionData.feedbackAdvisement;
		result.isCorrect = questionData.status === 1 ? true : false;

		return result;
	}
}

class ApiResultGetGeneralQuestionData {
	constructor() {
		this.status = 1;
		this.data = {
			haveGeneralQuestion: true,
			questionList: [
				{
					id: "",
					number: 0,
					questionType: "",
					content: "",
					options: [
						{
							id: "",
							content: ""
						}
					]
				}
			],
			examinationData: {
				version: "",
				position: "",
				examinationDetail: {
					E01: {
						generalQuestion: {
							questionSort: [""],
							questionList: {

							}
						},
						advancedQuestion: {
							questionSort: [""],
							questionList: {}
						}
					}
				},
			},
			encryptionExaminationData: ""
		}
		this.code = "";
		this.description = "";
	}
}

class ApiResultFinishedGeneralQuestion {
	constructor() {
		this.Status = "";
		this.Data = {
			advancedQuestionData: {
				questionSort: [""],
				questionList: {}
			},
			encryptionExaminationData: ""
		};
		this.Code = "";
		this.Description = "";
	}
}

class ApiResultAdvancedQuestion {
	constructor() {
		this.id = "";
		this.summary = "";
		this.questionType = "";
		this.status = 0;
		this.content = "";
	}
}

class ApiRequestGetAdvancedQuestionData {
	constructor() {
		this.advancedQuestionId = "";
		this.encryptionExaminationData = "";
	}
}

class ApiResultGetAdvancedQuestionData {
	constructor() {
		this.Status = "";
		this.Data = {
			questionData: {
				number: 0,
				summary: "",
				questionType: "",
				status: 0,
				content: "",
				answer: {},
				optionSort: [""],
				optionList: {},
				answerId: {},
				answerContent: {},
				answerContentCustomization: {
					count: 0
				},
				answerAdvisement: null,
				answerAdvisementCustomization: {
					count: 0
				},
				id: "E01_A0001"
			},
			encryptionExaminationData: ""
		};
		this.Code = "";
		this.Description = "";
	}
}

/**
 * 回答權利問題回傳的資料格式
 * */
class ApiResultAnswerAdvancedQuestion {
	constructor() {
		this.Status = 0;
		this.Data = {
			questionData: {
				id: "",
				summary: "",
				questionType: "",
				status: 0,
				content: "",
				userAnswer: "",
				optionSort: [""],
				optionList: {},
				feedbackId: "",
				feedbackContent: "",
				feedbackAdvisement: "",
				feedbackAdvisementCustomization: {
					count: 0
				}
			},
			encryptionExaminationData: ""
		}
		this.Code = "";
		this.Description = "";
		this.Data.questionData.optionSort.pop();
	}
}

class BaseQuestion {
	constructor() {
		this.id = "";
		this.number = 0;
		this.questionType = "";
		this.description = "";
		this.options = [{
			id: "",
			description: "",
		}]
		this.options.pop();
	}
}

class QuickQuestion {
	constructor() {
		this.id = "";
		this.description = "";
	}
}

class AdvancedQuestion {
	constructor() {
		this.number = 0;
		this.advancedQuestionId = "";
		this.description = "";
		this.summary = "";
		this.questionType = "";
		this.status = "";
		this.options = [{
			//ID
			id: "",
			//答案值
			description: ""
		}]
		this.options.pop();
	}
}

class CurrentAdvancedQuestions {
	constructor() {
		this.advancedQuestions = [
			new AdvancedQuestion()
		]
		this.advancedQuestions.pop();
	}
}

class AnsResult {
	constructor() {
		this.id = "";
		this.result = "";
		this.detail = "";
		this.isCorrect = false;
	}
}

var employeeHaveBaseQuestionLocalStorge = new class {
	/**
	 * 
	 * @param {Number} categoryId
	 * @returns {boolean}
	 */
	getValue(categoryId) {
		var result = localStorage["employee_E0" + categoryId.toString() + "_HaveBaseQuestion"];
		return result === 'true';
	}

	/**
	 * @param {Number} categoryId
	 * @param  {boolean} value
	 * @returns {Array<AdvancedQuestion>}
	 * */
	setValue(categoryId, value) {
		localStorage["employee_E0" + categoryId.toString() + "_HaveBaseQuestion"] = value;
	}

	/**
	 * 
	 * @param {Number} categoryId
	 */
	clear(categoryId) {
		localStorage.removeItem("employee_E0" + categoryId.toString() + "_HaveBaseQuestion");
	}
}

var employeeAdvancedQuestionsLocalStorge = new class {
	/**
	 * 
	 * @param {Number} categoryId
	 * @returns {Array<AdvancedQuestion>}
	 */
	getValue(categoryId) {
		var result = localStorage["employee_E0" + categoryId.toString() + "_AdvancedQuestions"];
		return JSON.parse(result);
	}

	/**
	 * 
	 * @returns {Array<AdvancedQuestion>}
	 * */
	setValue(categoryId, value) {
		localStorage["employee_E0" + categoryId.toString() + "_AdvancedQuestions"] = JSON.stringify(value);
	}

	/**
	 * 
	 * @param {Number} categoryId
	 */
	clear(categoryId) {
		localStorage.removeItem("employee_E0" + categoryId.toString() + "_AdvancedQuestions");
	}
}

var employeeCurrentAdvancedQuestionLocalStorge = new class {
	/**
	 * 
	 * @param {Number} categoryId
	 * @returns {string}
	 */
	getValue(categoryId) {
		return localStorage["employee_" + "E0" + categoryId + "_CurrentAdvancedQuestion"];
	}

	/**
	 * 
	 * @param {Number} categoryId
	 * @param {string} advancedQuestionId
	 */
	setValue(categoryId, advancedQuestionId) {
		localStorage["employee_" + "E0" + categoryId + "_CurrentAdvancedQuestion"] = advancedQuestionId;
	}

	/**
	 * 
	 * @param {Number} categoryId
	 */
	clear(categoryId) {
		localStorage.removeItem("employee_" + "E0" + categoryId + "_CurrentAdvancedQuestion");
	}
}


var employeeEncryptLocalStorge = new class {
	/**
	* @returns {string}
	* */
	getValue() {
		return localStorage["employee_encryptionExaminationData"];
	}

	/**
	 * 
	 * @param {string} value
	 */
	setValue(value) {
		localStorage["employee_encryptionExaminationData"] = value;
	}

	clear() {
		localStorage.removeItem("employee_encryptionExaminationData");
	}
}

var vData = {
	/**
	*API的網域名稱
	 */
	host: "http://192.168.1.90",

	/**
	* 五大項目
	*/
	categories: [
		{ id: 1, value: "人事(勞、健、退投保)" },
		{ id: 2, value: "出勤(加班、補休、特別休假)" },
		{ id: 3, value: "薪資(工資、非工資福利)" },
		{ id: 4, value: "職業災害補償" },
		{ id: 5, value: "資遣費、退休金" }
	],

	/**
	 * 目前在六大項目的那一個項目
	 * */
	category: {
		id: 0,
		value: ""
	},

	/**
	 * 0:五大項目選單  1:基本問題  2:權利問題  3:回答結果
	*/
	step: 0,

	/**
	 *目前在作答的基本題目
	 */
	currentBaseQuestions: [new BaseQuestion()],

	haveGeneralQuestion: true,

	baseQuestionAnswerData: {},

	currentAdvancedQuestion: new AdvancedQuestion(),

	currentAdvancedQuestions: [new AdvancedQuestion()],

	advancedAnswerData: {},

	ansResult: new AnsResult(),

	encryptionExaminationData: "",

	errorList: {},

	form: {
		encryptionExaminationData: "",
		position: "",
		Name: "",
		Birthday: "",
		Gender: "",
		PhoneNumber: "",
		Email: ""
	},

	init: function () {
		this.currentBaseQuestions.pop();
		this.currentAdvancedQuestions.pop();
	}
}

vData.init();

var vm = new Vue({
	el: "#myVue",
	data: {
		//姓名
		name: "",
		nameMessage: "",

		sex: -1,

		birthYear: -1,
		birthMonth: -1,
		birthDay: -1,

		mail: "",
		mailMessage: "",

		tel: "",
		telMessage: "",

		/**
		 *API的網域名稱
		 */
		host: "http://192.168.1.90",

		/**
		 * 五大項目
		*/
		categories: [
			{ id: 1, value: "人事(勞、健、退投保)" },
			{ id: 2, value: "出勤(加班、補休、特別休假)" },
			{ id: 3, value: "薪資(工資、非工資福利)" },
			{ id: 4, value: "職業災害補償" },
			{ id: 5, value: "資遣費、退休金" }
		],

		/**
		 * 目前點擊的項目選單
		 */
		category: {
			id: 0,
			value: ""
		},

		/**
		 *0:五大項目選單  1:基本問題  2:權利問題  3:回答結果
		 */
		step: 0,

		currentBaseQuestions: [new BaseQuestion()],

		haveGeneralQuestion: true,

		baseQuestionAnswerData: {},

		currentAdvancedQuestion: new AdvancedQuestion(),

		currentAdvancedQuestions: [new AdvancedQuestion()],

		advancedAnswerData: {},

		ansResult: new AnsResult(),

		encryptionExaminationData: "",

		errorList: {},

		message: "",

		form: {
			encryptionExaminationData: "",
			position: "",
			Name: "",
			Birthday: "",
			Gender: "",
			PhoneNumber: "",
			Email: ""
		}

	},
	created: function () {
		this.currentBaseQuestions.pop();
		//this.currentAdvancedQuestions.pop();
		this.encryptionExaminationData = employeeEncryptLocalStorge.getValue();
		vData.encryptionExaminationData = employeeEncryptLocalStorge.getValue();
	},
	methods: {

		/**
		 * 清除所有作答紀錄
		 * */
		clearQuestionsRecord: function () {
			employeeEncryptLocalStorge.clear();

			vData.categories.forEach(function (e) {
				employeeAdvancedQuestionsLocalStorge.clear(e.id);
				employeeCurrentAdvancedQuestionLocalStorge.clear(e.id);
				employeeHaveBaseQuestionLocalStorge.clear(e.id);
			});
		},

		/**
		 * 
		 * @param {string} categoryId 五大項目的id
		 */
		chooseCategory: function (categoryId) {

			vData = this;

			vData.category = vData.categories[categoryId - 1];
			var advancedQuestionId = employeeCurrentAdvancedQuestionLocalStorge.getValue(vData.category.id);

			if (isNullOrUndefinedOrWhiteSpace(advancedQuestionId)) {
				vData.getGeneralQuestionData(categoryId, employeeEncryptLocalStorge.getValue());
				vData.step = 1;
			} else {
				vData.haveGeneralQuestion = employeeHaveBaseQuestionLocalStorge.getValue(vData.category.id);
				vData.getAdvancedQuestion(advancedQuestionId, employeeEncryptLocalStorge.getValue());
				vData.currentAdvancedQuestions = employeeAdvancedQuestionsLocalStorge.getValue(vData.category.id);
				vData.step = 2;
			}
		},

		/**
		 * 取得基本問題
		 * @param {string} questionCategoryId 五大項目ID
		 * @param {string} encryptionExaminationData
		 */
		getGeneralQuestionData: function (questionCategoryId, encryptionExaminationData) {
			vData = this;

			$("body").loading({ start: true });

			$.ajax({
				type: "POST",
				url: vData.host + "/Examination/GetGeneralQuestionData",
				data: {
					questionCategoryId: "E0" + questionCategoryId.toString(),
					encryptionExaminationData: encryptionExaminationData
				},
				/**
				 * 
				 * @param {ApiResultGetGeneralQuestionData} result
				 */
				success: function (result) {

					$("body").loading({ start: false });

					if (result.status === 1) {
						vData.baseQuestionAnswerData = {};

						employeeEncryptLocalStorge.setValue(result.data.encryptionExaminationData);
						vData.encryptionExaminationData = result.data.encryptionExaminationData;

						vData.haveGeneralQuestion = result.data.haveGeneralQuestion;
						employeeHaveBaseQuestionLocalStsetValuee.set(vData.category.id, vData.haveGeneralQuestion);

						if (!result.data.haveGeneralQuestion) {
							vData.getFinishedGeneralQuestion("E0" + vData.category.id.toString(), vData.encryptionExaminationData, null);
							return;
						}

						var currentBaseQuestions = [new BaseQuestion()];
						currentBaseQuestions.pop();

						currentBaseQuestions = mapping.convertToBaseQuestions(result);
						currentBaseQuestions.forEach(function (e) {
							if (e.questionType === "Date") {
								vData.baseQuestionAnswerData[e.id] = "";
								vData.baseQuestionAnswerData[e.id + "obj"] = {
									year: "",
									month: "",
									day: ""
								};
							} else {
								vData.baseQuestionAnswerData[e.id] = "";
							}
						});

						vData.currentBaseQuestions = currentBaseQuestions;
						vData.step = 1;
					} else {
						if (result.data.StackTrace === null || result.data.StackTrace === undefined) {
							//Do nothing
						} else {
							vData.category = { id: 0, values: "" };
							vData.step = 0;
							$("#ajaxErrorModal").modal("show");
						}
					}
				},
				error: function () {
					$("body").loading({ start: false });
					$("#ajaxErrorModal").modal("show");
				}
			});
		},

		/**
		 * 完成基本問題
		 * @param {string} questioncategoryid
		 * @param {string} encryptionexaminationdata
		 * @param {string} questionanswerdata
		 */
		getFinishedGeneralQuestion: function () {
			vData = this;
			vData.currentBaseQuestions.forEach(function (e) {
				if (e.questionType === "Date") {
					var date = vData.baseQuestionAnswerData[e.id + "obj"].year.toString() + "/" + vData.baseQuestionAnswerData[e.id + "obj"].month.toString() + "/" + vData.baseQuestionAnswerData[e.id + "obj"].day.toString();
					vData.baseQuestionAnswerData[e.id] = date;
				}
			});
			$("body").loading({ start: true });
			$.ajax({
				type: "post",
				url: vData.host + "/Examination/FinishedGeneralQuestion",
				data: {
					questioncategoryid: "E0" + vData.category.id.toString(),
					encryptionexaminationdata: vData.encryptionExaminationData,
					questionanswerdata: JSON.stringify(vData.baseQuestionAnswerData)
				},
				/**
				 * @param {ApiResultFinishedGeneralQuestion} result
				 */
				success: function (result) {

					$("body").loading({ start: false });

					vData.errorList = {};

					if (result.status === 1) {
						employeeEncryptLocalStorge.setValue(result.data.examinationData);
						vData.encryptionExaminationData = result.data.encryptionExaminationData;

						vData.currentAdvancedQuestions = mapping.convertToCurrentAdvancedQuestions(vData.category.id, result);
						employeeAdvancedQuestionsLocalStorge.setValue(vData.category.id, vData.currentAdvancedQuestions);
						vData.getAdvancedQuestion(vData.currentAdvancedQuestions[0].advancedQuestionId, vData.encryptionExaminationData);
						vData.step = 2;
					} else {
						//console.log(result.Code);
						//console.log(result.Description);
						vData.errorList = result.data.errorList;
					}


				},
				error: function () {
					$("body").loading({ start: false });
					$("#ajaxErrorModal").modal("show");
				}
			});
		},

		/**
		 * 取得權利問題
		 * @param {string} advancedQuestionId
		 * @param {string} encryptionExaminationData
		 */
		getAdvancedQuestion: function (advancedQuestionId, encryptionExaminationData) {
			vData = this;
			$("body").loading({ start: true });
			$.ajax({
				type: "POST",
				url: vData.host + "/Examination/GetAdvancedQuestionData",
				data: {
					advancedQuestionId: advancedQuestionId,
					encryptionExaminationData: encryptionExaminationData
				},

				/**
				 * @param {ApiResultGetAdvancedQuestionData} result
				 */
				success: function (result) {
					$("body").loading({ start: false });
					if (result.status === 1) {

						employeeEncryptLocalStorge.setValue(result.data.encryptionExaminationData);
						vData.encryptionExaminationData = result.data.encryptionExaminationData;

						if (result.code !== null || result.description !== null) {
							//console.log(result.Code);
							//console.log(result.Description);
						} else {
							vData.currentAdvancedQuestion = mapping.convertToCurrentAdvancedQuestion(result);
							vData.encryptionExaminationData = result.data.encryptionExaminationData;
							vData.step = 2;
							$('.quick-question-Expand').toggle(false);
							$('.quick-question').toggle(true);
						}

						employeeCurrentAdvancedQuestionLocalStorge.setValue(vData.category.id, vData.currentAdvancedQuestion.advancedQuestionId);
						vData.advancedAnswerData = {};
						vData.message = "";
						vData.step = 2;
					}

				},
				error: function () {
					$("body").loading({ start: false });
					$("#ajaxErrorModal").modal("show");
				}
			});
		},

		/**
		 * 回答權利問題
		 * */
		submitAdvancedAnswer: function () {
			vData = this;
			$("body").loading({ start: true });
			$.ajax({
				type: "POST",
				url: vData.host + "/Examination/AnswerAdvancedQuestion",
				data: {
					advancedQuestionId: vData.currentAdvancedQuestion.advancedQuestionId,
					userAnswer: vData.advancedAnswerData[vData.currentAdvancedQuestion.advancedQuestionId],
					encryptionExaminationData: vData.encryptionExaminationData
				},
				/** 
				 * @param {ApiResultAnswerAdvancedQuestion} result
				 */
				success: function (result) {
					$("body").loading({ start: false });
					vData.message = "";

					if (result.status === 1) {
						employeeEncryptLocalStorge.setValue(result.data.encryptionExaminationData);
						vData.encryptionExaminationData = result.data.encryptionExaminationData;
						vData.currentAdvancedQuestions.find(x => x.advancedQuestionId === vData.currentAdvancedQuestion.advancedQuestionId).status = result.data.questionData.status;
						vData.currentAdvancedQuestion = mapping.convertToCurrentAdvancedQuestion(result);
						vData.ansResult = mapping.convertToAnsResult(result);
						vData.step = 3;
						employeeAdvancedQuestionsLocalStorge.setValue(vData.category.id, vData.currentAdvancedQuestions)
						checkupModal.show("#ans-modal");
					} else {
						if (result.data.StackTrace === null || result.data.StackTrace === undefined) {
							vData.message = result.description;
						} else {
							$("#ajaxErrorModal").modal("show");
						}
					}
				},
				error: function () {
					$("body").loading({ start: false });
					$("#ajaxErrorModal").modal("show");
				}
			});

		},

		/**
		 * 前往上一個進階題目
		 * */
		gotoPrevAdvancedQuestion: function () {
			var index = 0;
			vData = this;
			index = vData.currentAdvancedQuestions.length - 1;

			if (vData.currentAdvancedQuestion.number === vData.currentAdvancedQuestions[0].number) {
				vData.step = 1;
				this.getGeneralQuestionData(vData.category.id, vData.encryptionExaminationData);
				employeeAdvancedQuestionsLocalStorge.clear(vData.category.id);
				employeeCurrentAdvancedQuestionLocalStorge.clear(vData.category.id);
			} else {
				index = vData.currentAdvancedQuestions.findIndex(function (e) {
					return e.advancedQuestionId === vData.currentAdvancedQuestion.advancedQuestionId;
				});
				this.getAdvancedQuestion(vData.currentAdvancedQuestions[index - 1].advancedQuestionId, vData.encryptionExaminationData);
			}

			checkupModal.hide("#ans-modal");
		},

		/**
		 * 前往下一個進階題目
		 * */
		gotoNextAdvancedQuestion: function () {
			vData = this;

			var index = vData.currentAdvancedQuestions.findIndex(function (e) {
				return e.advancedQuestionId === vData.currentAdvancedQuestion.advancedQuestionId;
			});

			this.getAdvancedQuestion(vData.currentAdvancedQuestions[index + 1].advancedQuestionId, vData.encryptionExaminationData);

			checkupModal.hide("#ans-modal");
		},

		/**
		 * 快速切換題目
		 * @param {string} advancedQuestionId
		 * @param {string} encryptionExaminationData
		 */
		switchAdvancedQuestion: function (advancedQuestionId, encryptionExaminationData) {
			this.getAdvancedQuestion(advancedQuestionId, encryptionExaminationData);
		},

		goMenu: function () {
			vData = this;
			vData.step = 0;
			vData.category = { id: 0, value: '' };
		},

		submit: function (e) {

			var self = this;

			self.form.encryptionExaminationData = this.encryptionExaminationData;
			self.form.Birthday = self.form.birthYear.toString() + "/" + (self.form.birthMonth.toString()) + "/" + (self.form.birthDay.toString());
			self.form.position = "Employee";

			$("body").loading({ start: true });

			$.ajax({
				type: "POST",
				xhrFields: { withCredentials: true },
				url: apiUrl.createReport(),
				data: self.form,
				xhrFields: { withCredentials: true },
				success: function (data) {
					$("body").loading({ start: false });
					if (data.status === 1)
						$("#sendReportSuccessModal").modal("show");
					else {
						if (result.data.StackTrace === null || result.data.StackTrace === undefined) {
							//Do nothing
						} else {
							$("#ajaxErrorModal").modal("show");
						}
					}
				},
				error: function (msg) {
					$("body").loading({ start: false });
					$("#ajaxErrorModal").modal("show");
				}
			});
		}
	},
	computed: {
		answeredCount: function () {
			vData = this;
			var count = vData.currentAdvancedQuestions.filter(x => x.status > 0).length;
			return count;
		},
		yetaAnsweredCount: function () {
			vData = this;
			var count = vData.currentAdvancedQuestions.filter(x => x.status > 0).length;
			return vData.currentAdvancedQuestions.length - count;
		},
		notLastadvancedQuestion: function () {
			vData = this;
			var index = vData.currentAdvancedQuestions.length - 1;
			var result = vData.currentAdvancedQuestion.number !== vData.currentAdvancedQuestions[index].number;
			return result;
		},
		getYears: function () {
			var result = [];
			for (var i = new Date().getFullYear(); i >= 1911; i--) {
				result.push(i);
			}
			return result;
		},
		getMonths: function () {
			var result = [];
			for (var i = 1; i <= 12; i++) {
				if (i <= 9) {
					result.push("0" + i.toString());
				}
				else {
					result.push(i);
				}
			}
			return result;
		},
		getDays: function () {
			var result = [];
			for (var i = 1; i <= 31; i++) {
				if (i <= 9) {
					result.push("0" + i.toString());
				}
				else {
					result.push(i);
				}
			}
			return result;
		}
	}
});
    
    
    var app = new Vue({
      el: "#app",
      data: {
        data: {}
      },
      beforeCreate: function () {
        var self = this;
        $.getJSON("https://api.kcg.gov.tw/api/service/get/4eba94e0-323c-4530-95a6-dd276bd8765d", function (data) {
          self.data = data.data;
        });
      },
      methods:{
        helloAlert:function(){
          alert();
        }
      }
    });
  </script>

</body>

</html>
